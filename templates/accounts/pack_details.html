{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>{{ pack.name }}</title>
  </head>
  <body>
    <div class="container">
      <div class="nav">...</div>

      <h2>{{ pack.name }}</h2>
      {% if pack_image %}
      <img
        src="{% static pack_image %}"
        alt="{{ pack.name }}"
        style="max-width: 220px"
        onerror="this.style.display='none'"
      />
      {% endif %}
      <p>{{ pack.description }}</p>
      <p>Preço: {{ pack.price }} moedas</p>

      <h3>Jogadores possíveis</h3>
      <div class="players-grid">
        {% for item in entries %}
        <div class="player-card-small">
          {% if item.player %} {% if item.player_photo %}
          <img
            src="{% static item.player_photo %}"
            style="width: 160px; height: auto"
            onerror="this.style.display='none'"
          />
          {% else %}
          <!-- fallback: tente usar photo_path ou nada -->
          <div
            style="
              width: 160px;
              height: 90px;
              background: #eee;
              display: flex;
              align-items: center;
              justify-content: center;
            "
          >
            Sem foto
          </div>
          {% endif %}
          <div>{{ item.player.name }}</div>
          <div>Overall: {{ item.player.overall }}</div>
          {% else %}
          <div>
            Jogador não encontrado: {{ item.entry.player_type }}:{{
            item.entry.player_id }}
          </div>
          {% endif %}
        </div>
        {% endfor %}
      </div>

      <form method="post" action="{% url 'pack_open' pack.id %}">
        {% csrf_token %}
        <button type="submit" class="btn">
          Abrir pack ({{ pack.price }} moedas)
        </button>
      </form>
    </div>
  </body>
</html>
